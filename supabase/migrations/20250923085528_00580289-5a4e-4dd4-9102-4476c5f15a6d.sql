-- Fix market_day data to reflect 5-day market system
-- Update all merchants to use proper 5-day market format based on CSV data

-- Clear existing merchants and re-insert with correct data
DELETE FROM public.merchants;

-- Insert merchants with correct 5-day market system
INSERT INTO public.merchants (name, address, latitude, longitude, market_day, opening_time, closing_time, owner_name, description, is_open) VALUES
-- 충청남도 데이터
('병천시장', '천안시 동남구 병천면 아우내2길 20-3', 36.8912, 127.3022, '1,6', '08:00', '18:00', '시장 관리사무소', '천안의 전통 5일장', true),
('성환이화시장', '천안시 서북구 성환중앙로 50', 36.9225, 127.1583, '1,6', '08:00', '18:00', '시장 관리사무소', '성환의 전통시장', true),
('산성시장', '공주시 용담길 20', 36.4465, 127.1187, '1,6', '08:00', '18:00', '시장 관리사무소', '공주 산성시장', true),
('유구시장', '공주시 유구읍 시장길 28', 36.4003, 127.2519, '3,8', '08:00', '18:00', '시장 관리사무소', '유구의 전통시장', false),
('동부시장', '보령시 구상가길 10-1', 36.3332, 126.6125, '3,8', '08:00', '18:00', '시장 관리사무소', '보령 동부시장', false),
('웅천시장', '보령시 웅천읍 장터4길 24', 36.4125, 126.5442, '2,7', '08:00', '18:00', '시장 관리사무소', '웅천의 전통시장', true),
('중앙시장', '보령시 중앙로 97-6', 36.3332, 126.6125, '3,8', '08:00', '18:00', '시장 관리사무소', '보령 중앙시장', false),
('한내시장', '보령시 대흥로 28', 36.3332, 126.6125, '3,8', '08:00', '18:00', '시장 관리사무소', '보령 한내시장', false),
('현대시장', '보령시 대흥로 16', 36.3332, 126.6125, '3,8', '08:00', '18:00', '시장 관리사무소', '보령 현대시장', false),
('둔포전통시장', '아산시 둔포면 둔포면로25번길 15', 36.7312, 127.0242, '2,7', '08:00', '18:00', '시장 관리사무소', '둔포의 전통시장', true),
('온양온천시장', '아산시 시장길 29', 36.7898, 127.0014, '4,9', '08:00', '18:00', '시장 관리사무소', '온양온천 전통시장', false),
('온양온천역풍물5일장', '아산시 온천대로 1496', 36.7898, 127.0014, '4,9', '08:00', '18:00', '시장 관리사무소', '온양온천역 5일장', false),
('동부전통시장', '서산시 시장1로 6', 36.7847, 126.4507, '2,7', '08:00', '18:00', '시장 관리사무소', '서산 동부전통시장', true),
('화지중앙시장', '논산시 대화로 78', 36.1873, 127.0989, '3,8', '08:00', '18:00', '시장 관리사무소', '논산 화지중앙시장', false),
('연무안심시장', '논산시 연무읍 연무로166번길 7-19', 36.1873, 127.0989, '5,10', '08:00', '18:00', '시장 관리사무소', '연무안심시장', false),
('연산시장', '논산시 연산면 연산4길 10-7', 36.1873, 127.0989, '5,10', '08:00', '18:00', '시장 관리사무소', '연산시장', false),
('당진전통시장', '당진시 시장길 100', 36.8934, 126.6275, '5,10', '08:00', '18:00', '시장 관리사무소', '당진전통시장', false),
('신평시장', '당진시 신평면 금천리 385-2', 36.8934, 126.6275, '2,7', '08:00', '18:00', '시장 관리사무소', '신평시장', true),
('합덕전통시장', '당진시 합덕읍 버그내2길 128-25', 36.8934, 126.6275, '1,6', '08:00', '18:00', '시장 관리사무소', '합덕전통시장', true),
('금산시장', '금산군 금산읍 건삼전길 11', 36.1088, 127.4881, '2,7', '08:00', '18:00', '시장 관리사무소', '금산시장', true),
('마전시장', '금산군 추부면 하마전로 9', 36.1088, 127.4881, '4,9', '08:00', '18:00', '시장 관리사무소', '마전시장', false),
('부여시장', '부여군 부여읍 성왕로 173번길 12', 36.2756, 126.9098, '5,10', '08:00', '18:00', '시장 관리사무소', '부여시장', false),
('외산시장', '부여군 외산면 외산로 106-10', 36.2756, 126.9098, '4,9', '08:00', '18:00', '시장 관리사무소', '외산시장', false),
('은산시장', '부여군 은산면 충의로 680', 36.2756, 126.9098, '1,6', '08:00', '18:00', '시장 관리사무소', '은산시장', true),
('홍산시장', '부여군 홍산면 홍산시장로 43-3', 36.2756, 126.9098, '2,7', '08:00', '18:00', '시장 관리사무소', '홍산시장', true),

-- 충청북도 데이터
('밤고개자연시장', '청주시 상당구 내덕동 398-4', 36.6424, 127.4890, '2,7', '08:00', '18:00', '시장 관리사무소', '청주 밤고개자연시장', true),
('육거리종합시장', '청주시 상당구 석교동 63-1', 36.6424, 127.4890, '2,7', '08:00', '18:00', '시장 관리사무소', '청주 육거리종합시장', true),
('내수전통시장', '청주시 청원구 내수읍 내수로 726', 36.6424, 127.4890, '5,10', '08:00', '18:00', '시장 관리사무소', '내수의 전통시장', false),
('오창전통시장', '청주시 청원구 오창면 장대리 294', 36.6424, 127.4890, '3,8', '08:00', '18:00', '시장 관리사무소', '오창의 전통시장', false),
('자유시장', '충주시 충인6길 16(충의동)', 36.9910, 127.9261, '5,10', '08:00', '18:00', '시장 관리사무소', '충주 자유시장', false),
('연원시장', '충주시 금곡로 31(연수동)', 36.9910, 127.9261, '4,9', '08:00', '18:00', '시장 관리사무소', '충주 연원시장', false),
('엄정내창시장', '충주시 엄정면 엄정내창로 191-1', 36.9910, 127.9261, '3,8', '08:00', '18:00', '시장 관리사무소', '엄정내창의 전통시장', false),
('목행시장', '충주시 행정7길 26(목행동)', 36.9910, 127.9261, '2,7', '08:00', '18:00', '시장 관리사무소', '충주 목행시장', true),
('역전한마음', '제천시 내토로28길12(화산동)', 37.1326, 128.1906, '3,8', '08:00', '18:00', '시장 관리사무소', '제천 역전한마음시장', false),
('덕산시장', '제천시 덕산면 약초로3안길5-1', 37.1326, 128.1906, '4,9', '08:00', '18:00', '시장 관리사무소', '덕산의 전통시장', false),
('박달재전통시장', '제천시 백운면 평동로2길13', 37.1326, 128.1906, '1,6', '08:00', '18:00', '시장 관리사무소', '박달재 전통시장', true),
('보은전통시장', '보은군 보은읍 삼산로 17,16', 36.4892, 127.7294, '1,6', '08:00', '18:00', '시장 관리사무소', '보은의 전통시장', true),
('결초보은시장', '보은군 보은읍 삼산로 3길 8', 36.4892, 127.7294, '1,6', '08:00', '18:00', '시장 관리사무소', '결초보은시장', true),
('영동중앙시장', '영동군 영동읍 계산리 693-27', 36.1747, 127.7768, '4,9', '08:00', '18:00', '시장 관리사무소', '영동 중앙시장', false),
('영동전통시장', '영동군 영동읍 계산리 694-13', 36.1747, 127.7768, '4,9', '08:00', '18:00', '시장 관리사무소', '영동의 전통시장', false),
('증평장뜰시장', '증평군 증평읍 장뜰로 58-1', 36.7888, 127.5786, '1,6', '08:00', '18:00', '시장 관리사무소', '증평장뜰시장', true),
('운수대통!생거진천전통시장', '진천군 진천읍 원덕로 390', 36.8553, 127.4331, '5,10', '08:00', '18:00', '시장 관리사무소', '생거진천전통시장', false),
('진천중앙시장', '진천군 진천읍 중앙동6길', 36.8553, 127.4331, '5,10', '08:00', '18:00', '시장 관리사무소', '진천중앙시장', false),
('괴산전통시장', '괴산군 괴산읍 읍내로 15길 8-8', 36.8150, 127.7872, '3,8', '08:00', '18:00', '시장 관리사무소', '괴산전통시장', false),
('목도시장', '괴산군 불정면 목도로4길 11', 36.8150, 127.7872, '4,9', '08:00', '18:00', '시장 관리사무소', '목도시장', false),
('연풍시장', '괴산군 연풍면 향교로 홍문길 5-1', 36.8150, 127.7872, '2,7', '08:00', '18:00', '시장 관리사무소', '연풍시장', true),
('청천시장', '괴산군 청천면 청천2길10', 36.8150, 127.7872, '5,10', '08:00', '18:00', '시장 관리사무소', '청천시장', false),
('음성시장', '음성군 음성읍 시장로 117번길 6', 36.9433, 127.6889, '2,7', '08:00', '18:00', '시장 관리사무소', '음성시장', true),
('무극시장', '음성군 무극면 무극로 308번길', 36.9433, 127.6889, '5,10', '08:00', '18:00', '시장 관리사무소', '무극시장', false),
('대소시장', '음성군 대소면 오태로 104', 36.9433, 127.6889, '3,8', '08:00', '18:00', '시장 관리사무소', '대소시장', false),
('삼성시장', '음성군 삼성면 대성로 615', 36.9433, 127.6889, '1,6', '08:00', '18:00', '시장 관리사무소', '삼성시장', true),
('감곡시장', '음성군 감곡면 장감로 132번길 22', 36.9433, 127.6889, '3,8', '08:00', '18:00', '시장 관리사무소', '감곡시장', false),
('단양구경시장', '단양군 단양읍 도전5길 31', 36.9844, 128.3655, '1,6', '08:00', '18:00', '시장 관리사무소', '단양구경시장', true),
('매포전통시장', '단양군 매포읍 평동24길 8', 36.9844, 128.3655, '4,9', '08:00', '18:00', '시장 관리사무소', '매포전통시장', false);

-- Add region column to categorize markets
ALTER TABLE public.merchants ADD COLUMN IF NOT EXISTS region TEXT;

-- Update region based on address
UPDATE public.merchants SET region = 
  CASE 
    WHEN address LIKE '%천안%' OR address LIKE '%공주%' OR address LIKE '%보령%' OR 
         address LIKE '%아산%' OR address LIKE '%서산%' OR address LIKE '%논산%' OR 
         address LIKE '%당진%' OR address LIKE '%금산%' OR address LIKE '%부여%' THEN 'chungnam'
    WHEN address LIKE '%청주%' OR address LIKE '%충주%' OR address LIKE '%제천%' OR 
         address LIKE '%보은%' OR address LIKE '%영동%' OR address LIKE '%증평%' OR 
         address LIKE '%진천%' OR address LIKE '%괴산%' OR address LIKE '%음성%' OR 
         address LIKE '%단양%' THEN 'chungbuk'
    ELSE 'sejong'
  END;